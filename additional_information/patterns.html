<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Mapping Patterns &mdash; mixcoatl 0.2.9 documentation</title>
    
    <link rel="stylesheet" href="../_static/better.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.2.9',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="mixcoatl 0.2.9 documentation" href="../index.html" />
    <link rel="up" title="Additional Information" href="additional_information.html" />
    <link rel="prev" title="Additional Information" href="additional_information.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  </head>
  <body>
    <header id="pageheader"><h1><a href="../index.html ">
        mixcoatl 0.2.9 documentation
    </a></h1></header>
  <div class="related top">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="additional_information.html" title="Previous document">Additional Information</a>
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="../index.html">mixcoatl 0.2.9 documentation</a></li>
      <li>
        <a href="additional_information.html">Additional Information</a>
      </li> 
    </ul>
  </nav>
  </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="mapping-patterns">
<h1>Mapping Patterns<a class="headerlink" href="#mapping-patterns" title="Permalink to this headline">¶</a></h1>
<p>This document covers common patterns, regardless of Resource type, that are
implemented and other general commonalities for using mixcoatl.</p>
<div class="section" id="module-and-class-structure">
<h2>Module and Class Structure<a class="headerlink" href="#module-and-class-structure" title="Permalink to this headline">¶</a></h2>
<p>The module structure largely follows the conventions of the DCM API to minimize
disconnect between the API docs. To be more <cite>pythonic</cite> certain conventions and
transformations are done, however:</p>
<ul class="simple">
<li>camel-cased strings (such as attributes and query parameters) are replaced by
snake-cased versions.</li>
<li>attributes with nested structures are returned as dictionaries</li>
<li>CRUD operations are implemented primarily as class methods and, where
appropriate, return an instance of the given resource type. These operations
are named as snake-cased versions of the operation (i.e. <cite>describeServer</cite>
becomes <cite>describe_server()</cite>.</li>
<li>All attributes are normally lazy loaded except for the DCM unique identifier
for a resource.</li>
<li>All resources support calling <cite>.all()</cite></li>
<li>Resources can be requested in <cite>basic</cite> or <cite>extended</cite> form</li>
<li>By default, all resources are returned in <cite>extended</cite> form which is a much
longer API call but reduces the need to requery the API endpoint to denormalize
certain attributes. Greedy fetch if you will.</li>
<li>Resources always return a resource-specific exception with any API call error
messages as the error message when available</li>
<li>Results from <cite>.all()</cite> support returning either a <cite>list</cite> of resource objects
or the ids only (<cite>keys_only=True</cite> parameter)</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Regardless of asking for keys only or full objects, the same amount of data
is returned as there is no DCM API mechanism for only returning ids. This is
simply a convenience done on the python side.</p>
</div>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>Using the <cite>geography/DataCenter</cite> API for instance:</p>
<div class="section" id="import-module">
<h3>Import Module<a class="headerlink" href="#import-module" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre>&gt;&gt;&gt; from mixcoatl.geography.data_center import DataCenter
</pre></div>
</div>
</div>
<div class="section" id="return-details-for-a-single-data-center">
<h3>Return details for a single data center<a class="headerlink" href="#return-details-for-a-single-data-center" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre>&gt;&gt;&gt; <span class="nv">dc</span> <span class="o">=</span> DataCenter<span class="o">(</span>12345<span class="o">)</span>
&gt;&gt;&gt; dc.data_center_id
12345
&gt;&gt;&gt; dc.name
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">At this point, an actual API call is made to the DCM endpoints</p>
</div>
</div>
<div class="section" id="list-all-data-centers">
<h3>List All Data Centers<a class="headerlink" href="#list-all-data-centers" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">requires a <cite>region_id</cite></p>
</div>
<div class="highlight-bash"><div class="highlight"><pre>&gt;&gt;&gt; DataCenter.all<span class="o">(</span><span class="nv">region_id</span><span class="o">=</span>12345<span class="o">)</span>
<span class="o">[{</span><span class="s1">&#39;data_center_id&#39;</span>:1,...<span class="o">}</span>,<span class="o">{</span><span class="s1">&#39;data_center_id&#39;</span>:2,...<span class="o">}]</span>
</pre></div>
</div>
</div>
<div class="section" id="list-all-data-centers-basic-detail">
<h3>List all data centers (&#8216;basic&#8217; detail)<a class="headerlink" href="#list-all-data-centers-basic-detail" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre>&gt;&gt;&gt; DataCenter.all<span class="o">(</span><span class="nv">region_id</span><span class="o">=</span>12345, <span class="nv">detail</span><span class="o">=</span><span class="sb">`</span>basic<span class="sb">`</span><span class="o">)</span>
<span class="o">[{</span><span class="s1">&#39;data_center_id&#39;</span>:1<span class="o">}</span>,<span class="o">{</span><span class="s1">&#39;data_center_id&#39;</span>:2<span class="o">}]</span>
</pre></div>
</div>
</div>
<div class="section" id="return-ids">
<h3>Return IDs<a class="headerlink" href="#return-ids" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre>&gt;&gt;&gt; DataCenter.all<span class="o">(</span><span class="nv">region_id</span><span class="o">=</span>12345, <span class="nv">keys_only</span><span class="o">=</span>True<span class="o">)</span>
<span class="o">[</span>1, 2, 3, 4, 5<span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-new-resource">
<h3>Creating New Resource<a class="headerlink" href="#creating-new-resource" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In this case, we show the classmethod <cite>generate_api_key</cite> which maps to
the <cite>generateApiKey</cite> POST operation in the API.</p>
</div>
<div class="highlight-bash"><div class="highlight"><pre>&gt;&gt;&gt; from mixcoatl.admin.api_key import ApiKey
&gt;&gt;&gt; <span class="nv">a</span> <span class="o">=</span> ApiKey.generate_api_key<span class="o">(</span><span class="s1">&#39;my-test-apikey&#39;</span>, <span class="s1">&#39;a test api generated from mixcoatl&#39;</span><span class="o">)</span>
&gt;&gt;&gt; a
<span class="o">{</span><span class="s1">&#39;access_key&#39;</span>:<span class="s1">&#39;ABCDEFGHIJKL&#39;</span>,.....<span class="o">}</span>
&gt;&gt;&gt; a.__class__
mixcoatl.admin.api_key.ApiKey
</pre></div>
</div>
<p>Alternately, you can invoke this on an instance of <cite>ApiKey</cite>:</p>
<div class="highlight-bash"><div class="highlight"><pre>&gt;&gt;&gt; <span class="nv">a</span> <span class="o">=</span> ApiKey<span class="o">()</span>
&gt;&gt;&gt; a.name <span class="o">=</span> <span class="s1">&#39;another-test-key&#39;</span>
&gt;&gt;&gt; a.description <span class="o">=</span> <span class="s1">&#39;this is a test key&#39;</span>
&gt;&gt;&gt; a.create<span class="o">()</span>
&gt;&gt;&gt; a
<span class="o">{</span><span class="s1">&#39;access_key&#39;</span>:<span class="s1">&#39;ABCDEFGHIKL&#39;</span>,....<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<h3><a href="../index.html">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../readme.html">Read Me</a></li>
<li class="toctree-l1"><a class="reference internal" href="../source/source.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dcm_utils/dcm_utils.html">DCM Utilities</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="additional_information.html">Additional Information</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">Mapping Patterns</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-and-class-structure">Module and Class Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="related bottom">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="additional_information.html" title="Previous document">Additional Information</a>
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="../index.html">mixcoatl 0.2.9 documentation</a></li>
      <li>
        <a href="additional_information.html">Additional Information</a>
      </li> 
    </ul>
  </nav>
  </div>
  <footer id="pagefooter">&copy; 2014, Quest Software, Inc..
      Created using <a href="http://sphinx-doc.org/">Sphinx</a>
      1.2.2
        with the <a href="http://github.com/irskep/sphinx-better-theme">
          better</a> theme.

  </footer>

  
  </body>
</html>